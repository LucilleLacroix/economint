<% if user_signed_in? %>
  <div class="home-page">
    <!-- ðŸ‘‹ Welcome -->
    <div class="welcome">
      <h1>Bienvenue <%= current_user.username %></h1>
    </div>

    <!-- ðŸ—“ï¸ SÃ©lecteur de pÃ©riode -->
    <div class="period-selector">
      <%= form_with url: root_path, method: :get, local: true do %>
        <label for="start_date">DÃ©but :</label>
        <%= date_field_tag :start_date, @start_date %>

        <label for="end_date">Fin :</label>
        <%= date_field_tag :end_date, @end_date %>

        <%= submit_tag "Filtrer", class: "btn treasury-btn" %>
      <% end %>
    </div>

    <!-- ðŸ“Š Graphique -->

      <canvas id="financesChart"
        data-controller="simple-chart"
        data-simple-chart-chart-id-value="financesChart"
        data-simple-chart-available-value="<%= @available_balance || 0 %>"
        data-simple-chart-expenses-value="<%= @total_expenses || 0 %>"
        data-simple-chart-savings-value="<%= @savings || 0 %>">
      </canvas>


    <!-- ðŸ’° Totaux -->
    <div class="totals">
      <p class="available">Solde Disponible : <strong><%= number_to_currency(@available_balance || 0) %></strong></p>
    </div>

    <!-- ðŸ”— Boutons dâ€™accÃ¨s -->
    <div class="nav-buttons">
      <%= link_to "Voir mes DÃ©penses", expenses_path, class: "btn expenses-btn" %>
      <%= link_to "Voir ma TrÃ©sorerie", revenues_path, class: "btn treasury-btn" %>
      <%= link_to "Mon Ã‰pargne", goals_path, class: "btn savings-btn" %>
    </div>
  </div>

<% else %>
  <div class="home-page not-signed-in">
    <p>Pour voir vos finances, connectez-vous.</p>
    <div class="nav-buttons">
      <%= link_to "Se connecter", new_user_session_path, class:"btn treasury-btn" %>
      <%= link_to "S'inscrire", new_user_registration_path, class:"btn savings-btn" %>
    </div>
  </div>
<% end %>
