<h2>Transactions d√©tect√©es dans le relev√©</h2>

<% if @transactions.any? %>
  <table style="width:100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #333; color: #fff;">
        <th>Date</th>
        <th>Description</th>
        <th>Montant</th>
        <th>Match Score</th>
      </tr>
    </thead>
    <tbody>
      <% @transactions.each do |tx| %>
        <% score = tx[:match_score] || 0 %>
        <% row_color =
            if score >= 0.8
              "#c8e6c9" # vert
            elsif score >= 0.5
              "#fff9c4" # jaune
            else
              "#ffcdd2" # rouge
            end %>
        <tr style="background-color: <%= row_color %>;">
          <td><%= tx[:date]&.strftime("%d/%m/%Y") %></td>
          <td><%= tx[:description] %></td>
          <td style="color: <%= tx[:amount] < 0 ? 'red' : 'green' %>;">
            <%= number_to_currency(tx[:amount], unit: "‚Ç¨") %>
          </td>
          <td><%= (score * 100).round %> %</td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>Aucune transaction d√©tect√©e. üòï</p>
<% end %>
