<h2>Transactions du relevÃ© <%= @reconciliation.name %></h2>

<% if @transactions.any? %>
  <table style="width:100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #333; color: #fff;">
        <th>Date</th>
        <th>Description</th>
        <th>Montant</th>
        <th>Match Score</th>
        <th>Type</th> <!-- Colonne basÃ©e sur le montant -->
      </tr>
    </thead>
    <tbody>
      <% @transactions.each do |tx| %>
        <% score = tx.match_score || 0 %>
        <% row_color =
            if score >= 0.8
              "#c8e6c9"
            elsif score >= 0.5
              "#fff9c4"
            else
              "#ffcdd2"
            end %>
        <tr style="background-color: <%= row_color %>;">
          <td><%= tx.date&.strftime("%d/%m/%Y") %></td>
          <td><%= tx.description %></td>
          <td style="color: <%= tx.amount < 0 ? 'red' : 'green' %>;">
            <%= number_to_currency(tx.amount, unit: "â‚¬") %>
          </td>
          <td><%= (score * 100).round %> %</td>
          <td><%= tx.amount < 0 ? "DÃ©bit" : "CrÃ©dit" %></td> <!-- Nouveau type basÃ© sur le montant -->
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>Aucune transaction trouvÃ©e. ðŸ˜•</p>
<% end %>
